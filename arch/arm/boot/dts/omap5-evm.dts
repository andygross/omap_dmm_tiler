/*
 * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */
/dts-v1/;

/include/ "omap5.dtsi"

/ {
	model = "TI OMAP5 EVM board";
	compatible = "ti,omap5-evm", "ti,omap5";

	memory {
		device_type = "memory";
		reg = <0x80000000 0x80000000>; /* 2 GB */
	};

	sound {
		compatible = "ti,abe-twl6040";
		ti,model = "OMAP5-sEVM";

		ti,jack-detection = <1>;
		ti,mclk-freq = <19200000>;

		ti,mcpdm = <&mcpdm>;
		ti,dmic = <&dmic>;

		ti,twl6040 = <&twl6040>;

		ti,aess = <&aess>;

		ti,mcbsp1 = <&mcbsp1>;
		ti,mcbsp2 = <&mcbsp2>;

		/* Audio routing */
		ti,audio-routing =
			"Headset Stereophone", "HSOL",
			"Headset Stereophone", "HSOR",
			"Earphone Spk", "EP",
			"Ext Spk", "HFL",
			"Ext Spk", "HFR",
			"Line Out", "AUXL",
			"Line Out", "AUXR",
			"HSMIC", "Headset Mic",
			"Headset Mic", "Headset Mic Bias",
			"MAINMIC", "Main Handset Mic",
			"Main Handset Mic", "Main Mic Bias",
			"SUBMIC", "Sub Handset Mic",
			"Sub Handset Mic", "Main Mic Bias",
			"AFML", "Line In",
			"AFMR", "Line In",
			"DMic", "Digital Mic",
			"Digital Mic", "Digital Mic1 Bias";
	};
};

&i2c1 {
	clock-frequency = <400000>;

	palmas: palmas@48 {
		reg = <0x48>;
		/* SPI = 0, IRQ# = 7, 4 = active high level-sensitive */
		interrupts = <0 7 4>; /* IRQ_SYS_1N cascaded to gic */
		interrupt-parent = <&gic>;
	};

	twl6040: twl@4b {
		compatible = "ti,twl6040";

		interrupts = <0 119 4>; /* IRQ_SYS_2N cascaded to gic */
		interrupt-parent = <&gic>;
		ti,audpwron-gpio = <&gpio5 17 0>;  /* gpio line 145 */

		vio-supply = <&smps7_reg>;
		v2v1-supply = <&smps9_reg>;
		enable-active-high;
	};
};

&pad_core_mux {
	pinctrl-names = "default";
	pinctrl-0 = <&audio_core_pin>,
		    <&dss_hdmi_pin>;

	audio_core_pin: audio_core_pins {
				/* TRM offset - 0x40, bits, mask */
		pinctrl-single,bits = <0x142 0x0400 0x041f>, /* ABE_CLKS */
				      <0x15c 0x0400 0x041f>, /* ABEMCPDM_UL_DATA */
				      <0x15e 0x0000 0x041f>, /* ABEMCPDM_DL_DATA */
				      <0x160 0x0400 0x041f>, /* ABEMCPDM_FRAME */
				      <0x162 0x0000 0x041f>, /* ABEMCPDM_LB_CLK */
				      <0x18a 0x000e 0x041f>; /* GPIO5 145 */
	};

	dss_hdmi_pin: dss_hdmi_pins {
		pinctrl-single,bits = <0xfe 0x000e 0x041f>; /* GPIO 193 */
	};
};

&pad_wkup_mux {
	pinctrl-names = "default";
	pinctrl-0 = <&audio_wkup_pin>;

	audio_wkup_pin: audio_wkup_pins {
				/* TRM offset - 0x40, bits, mask */
		pinctrl-single,bits = <0x2a 0x0138 0x0138>; /* SYS_NIRQ2 */
	};
};

&dsi1 {
	lcd {
		compatible = "ti,lg4591";

		lanes = <
			0       /* clk + */
			1       /* clk - */
			2       /* data1 + */
			3       /* data1 - */
			4       /* data2 + */
			5       /* data2 - */
			6       /* data3 + */
			7       /* data3 - */
			8       /* data4 + */
			9       /* data4 - */
		>;

		vdds_foo-supply = <&ldo2_reg>;

		gpios = <&gpio6 23 0>;	/* 183, reset */
	};
};

&i2c5 {
	tca: tca@22 {
		reg = <0x22>;
	};
};

&hdmi {
	tpd12s015 {
		compatible = "ti,tpd12s015";

		gpios = <&tca 0 0>,	/* TCA6424A P01, CT_CP_HDP */
			<&tca 1 0>,	/* TCA6424A P00, LS_OE*/
			<&gpio7 1 0>;	/* 193, HPD */

		hdmi-monitor {
			compatible = "ti,hdmi_panel";
		};

	};
};

/include/ "palmas.dtsi"
/include/ "twl6040.dtsi"
/include/ "tca6424a.dtsi"
